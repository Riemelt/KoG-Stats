(()=>{"use strict";var t,e={525:(t,e,s)=>{s(669),s(580);var i=s(627);const r=["rank 1","rank 2","rank 3","rank 4","rank 5"];function n(t,e,s,i){if(i>=r.length)return 0;const a=r[i];return t.categories[s][a]!==e.categories[s][a]?t.categories[s][a]-e.categories[s][a]:n(t,e,s,i+1)}var a=s(627);var o=s(627);class c{static comparePlayerEntries(t){return function(e,s){return n(e.getOptions(),s.getOptions(),t,0)}}constructor(t,e){this.options=e,this.className="leaderboard",this.$component=t.find(`.js-${this.className}`),this.$tableBody=this.$component.find(`.js-${this.className}__table-body`),this.$playerEntries=this.$component.find(`.js-${this.className}__table-row`),this.playerEntries=[],this.$playerEntries.each(this.initPlayerEntry.bind(this)),"Total"!==this.options.sortBy?this.initLeaderboard():(this.playerEntries[0].update("Total",1),this.playerEntries[1].update("Total",2),this.playerEntries[2].update("Total",3))}getPlayerEntries(){return this.playerEntries.filter((t=>t.hasAnyRanks(this.options.sortBy)))}render(t){this.$tableBody.empty(),t.forEach((t=>{const e=t.getHtml();this.$tableBody.append(e),t.setHandlers()}))}initLeaderboard(){this.$tableBody.empty();const t=this.options.sortBy;this.playerEntries=this.playerEntries.sort(c.comparePlayerEntries(t)).reverse(),this.playerEntries.forEach(((e,s)=>{if(e.hasAnyRanks(t)){e.update(t,s+1);const i=e.getHtml();this.$tableBody.append(i),e.setHandlers()}}))}initPlayerEntry(t,e){const s=o(e);this.playerEntries.push(new class{constructor(t,e){this.options=e,this.className="leaderboard",this.$component=t,this.$rank=this.$component.find(`.js-${this.className}__table-cell-rank`),this.$ranks=this.$component.find(`.js-${this.className}__table-cell-total-ranks`),this.$name=this.$component.find(`.js-${this.className}__table-cell-name`)}getOptions(){return this.options.player}getHtml(){return this.$component}setHandlers(){this.$name.on("click.player-entry-name",this.handleNameClick.bind(this))}hasAnyRanks(t){for(let e=0;e<r.length;e++)if(this.options.player.categories[t][r[e]]>0)return!0;return!1}update(t,e){this.setRank(e);const s=this.options.player.categories[t];this.setRanks(s)}makeActive(t){this.$rank.addClass(`${this.className}__table-cell-rank_rank${t}`)}removeActive(t){this.$rank.removeClass(`${this.className}__table-cell-rank_rank${t}`)}handleNameClick(){const t=new URLSearchParams(window.location.search);t.set("player",this.options.player.name),location.href=`player-profile.html?${t.toString()}`}setRank(t){this.$rank.html(t.toString()),t>=1&&t<=3&&this.makeActive(t)}setRanks(t){this.$ranks.each(((e,s)=>{a(s).html(t[r[e]].toString())}))}}(s,{player:this.options.players[t]}))}}const l=c;var h=s(409);const p=class{constructor(t,e){this.options=e,this.className="landing",this.$component=t,this.$pagination=this.$component.find(`.js-${this.className}__pagination`),this.$categoryMenu=this.$component.find(`.js-${this.className}__category-menu`);const s={sortBy:this.options.sortBy,...this.options.categoryMenu};this.categoryMenu=new class{constructor(t,e){this.options=e,this.className="category-menu",this.$component=t.find(`.js-${this.className}`),this.$items=this.$component.find(`.js-${this.className}__item`);let s=0;for(let t=0;t<this.options.categories.length;t++)if(this.options.categories[t]===this.options.sortBy){s=t;break}this.setActiveItem(i(this.$items.get(s))),this.setHandlers()}setActiveItem(t){this.$currentActiveItem?.removeClass(`${this.className}__item_active`),t.addClass(`${this.className}__item_active`),this.$currentActiveItem=t}setHandlers(){this.$items.on("click.categoryMenu",this.handleMenuItemClick.bind(this))}handleMenuItemClick(t){if(t.target instanceof HTMLElement){const e=i(t.currentTarget);this.setActiveItem(e);const s=new URLSearchParams(window.location.search);s.set("sortBy",this.options.categories[this.$items.index(e)]),location.search=s.toString()}}}(this.$component,s),this.leaderboard=new l(this.$component.find(`.js-${this.className}__leaderboard`),{sortBy:this.options.sortBy,players:this.options.players}),new h.Z(this.$pagination,{dataSource:this.leaderboard.getPlayerEntries(),render:this.leaderboard.render.bind(this.leaderboard)})}};!function(t){const e=s(478),i=s(131).topRanks,r=new URLSearchParams(window.location.search),n=Object.fromEntries(r.entries()),a={sortBy:void 0===n.sortBy?"Total":n.sortBy,players:i,...e};new p(t(".js-landing"),a)}(s(627))},478:t=>{t.exports=JSON.parse('{"categoryMenu":{"categories":["Total","Extreme","Insane","Hard","Main","Easy","Mod","Unknown"]}}')}},s={};function i(t){var r=s[t];if(void 0!==r)return r.exports;var n=s[t]={exports:{}};return e[t].call(n.exports,n,n.exports,i),n.exports}i.m=e,t=[],i.O=(e,s,r,n)=>{if(!s){var a=1/0;for(h=0;h<t.length;h++){for(var[s,r,n]=t[h],o=!0,c=0;c<s.length;c++)(!1&n||a>=n)&&Object.keys(i.O).every((t=>i.O[t](s[c])))?s.splice(c--,1):(o=!1,n<a&&(a=n));if(o){t.splice(h--,1);var l=r();void 0!==l&&(e=l)}}return e}n=n||0;for(var h=t.length;h>0&&t[h-1][2]>n;h--)t[h]=t[h-1];t[h]=[s,r,n]},i.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return i.d(e,{a:e}),e},i.d=(t,e)=>{for(var s in e)i.o(e,s)&&!i.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:e[s]})},i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),i.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{var t;i.g.importScripts&&(t=i.g.location+"");var e=i.g.document;if(!t&&e&&(e.currentScript&&(t=e.currentScript.src),!t)){var s=e.getElementsByTagName("script");if(s.length)for(var r=s.length-1;r>-1&&!t;)t=s[r--].src}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),i.p=t})(),(()=>{var t={826:0};i.O.j=e=>0===t[e];var e=(e,s)=>{var r,n,[a,o,c]=s,l=0;if(a.some((e=>0!==t[e]))){for(r in o)i.o(o,r)&&(i.m[r]=o[r]);if(c)var h=c(i)}for(e&&e(s);l<a.length;l++)n=a[l],i.o(t,n)&&t[n]&&t[n][0](),t[n]=0;return i.O(h)},s=self.webpackChunk=self.webpackChunk||[];s.forEach(e.bind(null,0)),s.push=e.bind(null,s.push.bind(s))})();var r=i.O(void 0,[871,977],(()=>i(525)));r=i.O(r)})();